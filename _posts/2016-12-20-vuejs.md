---
layout: posts
title: Vue.jsメモ
---
[Document](https://vuejs.org/v2/guide/instance.html)  
[API](https://vuejs.org/v2/api/)  
[Github](https://github.com/vuejs/vue)  
[Example](http://jsdo.it/38elements/vuejs-1)   

created, destroyedはよく使う [\*](https://vuejs.org/v2/api/#created)     
elに指定した要素はvm.$elでアクセスすることができる [\*](https://vuejs.org/v2/api/#el)   
vm.$watch()ではアロー関数を使用しない  
methodsに登録したものはthis.foo()で実行することができる  
my-car => myCar [\*](https://vuejs.org/v2/guide/components.html#Component-Naming-Conventions)  

#### プラグイン [\*](https://jp.vuejs.org/v2/guide/plugins.html)  
Vueを使う処理  
<br>

#### mixin [\*](https://vuejs.org/v2/guide/mixins.html)
値を置き換えるのではなく、結合するイメージ  
dataは結合される。  　
<br>

#### ディレクティブ [\*](https://vuejs.org/v2/guide/custom-directive.html)
DOMを直接操作するような処理を記述する  
<br>

#### render関数 [\*](https://vuejs.org/v2/guide/render-function.html)
createElement()で動的にテンプレートを生成  
[vm.$slots](https://vuejs.org/v2/api/#vm-slots)  
<br>

#### アニメーション [\*](https://vuejs.org/v2/guide/transitions.html#Overview)  
&lt;transition name=&quot;foo-bar&quot;&gt;の場合、CSSのクラスはfoo-bar-enter-activeとかfoo-bar-leave-activeになる [\*](https://vuejs.org/v2/guide/transitions.html#Transition-Classes)  
<br>

#### リアクティブの注意点 [\*](https://jp.vuejs.org/v2/guide/reactivity.html)  
* Vueコンストラクタのoption.dataはVueインスタンス生成時にsetter/getterを付与されるので  
新たにvm.foo = 1でプロパティを割り当てた場合はリアクティブにならない。  
* リアクティブな属性はあらかじめoption.dataで宣言しておく [\*](https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties)  
* [Vue.set(object, key, value)](https://vuejs.org/v2/api/#Vue-set)もしくは[vm.$set(object, key, value)](https://vuejs.org/v2/api/#vm-set)をしようすることでオブジェクトにリアクティブを持たせることができる。  
* arrayの注意点 [\*](https://vuejs.org/v2/guide/list.html#Caveats)  
* 複数の属性を割り当てる方法  
{%raw%}vm.foo = Object.assign({}, vm.foo, {apple: 1, orange: 2});{%endraw%}  
* 画面の描画が終わったときに処理を実行する際はVue.nextTick(callback)か[vm.$nextTick(callback)](https://vuejs.org/v2/guide/reactivity.html#Async-Update-Queue)を使う　[\*](https://vuejs.org/v2/guide/reactivity.html#Async-Update-Queue)  
<br>

#### v-model [\*](https://vuejs.org/v2/guide/forms.html)  
[API](https://vuejs.org/v2/api/#v-model)  
画面がロードされた際のtextareaやinputの初期値はv-modelに入らない  
<br>

#### v-bind  
[API](https://vuejs.org/v2/api/#v-bind)    

* `v-bind:id="id"`は`:id="id"`と同じ  
* v-bind:class='dataのキー名'  
* v-bind:class='[dataのキー名, dataのキー名]'   
* コンポーネントに対してv-bind:classを適用するとroot要素に効果が適用される  
* v-bind:styleはv-bind:classと同じように指定することができる  
* v-bind:true-value, v-bind:false-valueはチェックボックスの状態によって束縛される値のvmの属性を指定する [\*](https://vuejs.org/v2/guide/forms.html#Checkbox-1)  
* v-bind:valueはRadioやSelectが選択された場合、束縛される値のvmの属性を指定する [\*](https://vuejs.org/v2/guide/forms.html#Radio-1)  
* {%raw%}v-bind:value="{ foo: 'bar' }"{%endraw%}が可能  
* lazy,number,trim修飾詞がある
* dataのfoo属性の値をdisabledプロパティに割り当てる  
:disabled="foo"  
* {%raw%}&lt;option :value="item" v-for="item in items"&gt;{{item}}&lt;/option&gt;{%endraw%} [\*](https://vuejs.org/v2/guide/forms.html#Select)  
* v-bindは値をjavascriptとしてとるので文字列は`'`で囲む必要がある  
<br>

#### v-on [\*](https://jp.vuejs.org/v2/guide/events.html)  
[API](https://vuejs.org/v2/api/#v-on)  
ハンドラの引数に$eventをセットしてeventのデータを取得する [\*](https://vuejs.org/v2/guide/events.html#Methods-in-Inline-Handlers)   
`v-on:click="foo"`は`@click="foo"`と同じ  
下記のような[修飾詞](https://vuejs.org/v2/guide/events.html#Event-Modifiers)をセットすることができる  

```
<button v-on:click.stop.prevent.once="once">Once</button>
```
<br>

#### v-if [\*](https://vuejs.org/v2/guide/conditional.html)  
input要素など再利用されては困る要素には[key属性](https://vuejs.org/v2/guide/conditional.html#Controlling-Reusable-Elements-with-key)を付与する  

* v-else-if  

* v-else

<br>

#### v-show [\*](https://vuejs.org/v2/guide/conditional.html#v-show)  

#### v-for [\*](https://vuejs.org/v2/guide/list.html)  

```
<div v-for="user in users">foo</div>
<div v-for="(user, index) in users">foo</div>
<div v-for="(user, key) in users">foo</div>
<div v-for="i in 5">{%raw%}{{ i }}{%endraw%}</div>
```

再描画のために[key](https://vuejs.org/v2/guide/list.html#key)を置く  

<br>

##### v-html

v-onやv-modelに`.prevent`をつけるとevent.preventDefault()が自動実行  

<br>

#### watch
* ネストしたデータをwatchしたい場合はdeepを指定する [\*](https://vuejs.org/v2/api/#watch)  
handler()の関数には子データがすべて入る  

<br>

#### Components [\*](https://vuejs.org/v2/guide/components.html)
* Vue.component(tagName, options)  
* templateにはidを指定することができる  
* Vueコンストラクタのcomponentsキーに登録する
* ul, ol, table, selectの子要素に設置するときは[is](https://vuejs.org/v2/guide/components.html#DOM-Template-Parsing-Caveats)を使用する  
* dataは基本関数にする [\*](https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function)  
* コンポーネントの親子間は[isolated scope](https://vuejs.org/v2/guide/components.html#Passing-Data-with-Props)  
* props down(親=>子)の一方通行  
渡された値がオブジェクトや配列の場合、子コンポーネントでの破壊的処理が親コンポーネントのデータに影響を与える  
* events up(子=>親)  
* $on(), $emit()で子=>親 [\*](https://vuejs.org/v2/guide/components.html#Using-v-on-with-Custom-Events)  
* propsでテンプレートでの属性名を指定する [\*](https://vuejs.org/v2/guide/components.html#Passing-Data-with-Props)  
* 属性とv-bindの違い [\*](https://vuejs.org/v2/guide/components.html#Literal-vs-Dynamic)
* propsのデータはdata,computedの関数内で取り扱う [\*](https://vuejs.org/v2/guide/components.html#One-Way-Data-Flow)  
* propsは型チェック、デフォルト値、バリデーション、必須項目の設定を行うことができる [\*](https://vuejs.org/v2/guide/components.html#Prop-Validation)  
* 親子間でのv-modelの使用方法 [\*](https://vuejs.org/v2/guide/components.html#Form-Input-Components-using-Custom-Events)  
* 親テンプレートから子テンプレートへの文字列の埋め込みは&lt;slot&gt;を使う [\*](https://vuejs.org/v2/guide/components.html#Compilation-Scope)     
* 子テンプレートに埋め込まれた値を親テンプレートから使用するときはscoped slotを使う [\*](https://vuejs.org/v2/guide/components.html#Scoped-Slots)  
* 1つの場所に配置するコンポーネントをswitchのように切り替える場合は&lt;component&gt;にis属性で指定する [\*](https://vuejs.org/v2/guide/components.html#Dynamic-Components)   
切り替えられるコンポーネントを保持するには[&lt;keep-alive&gt;](https://vuejs.org/v2/guide/components.html#keep-alive)を使う  
* Vue.conponent()の第二引数に関数を指定することが可能です。この関数はPromiseを返すことができる。 [\*](https://vuejs.org/v2/guide/components.html#Async-Components)   
* テンプレートはfoo-bar、componentsキーはfooBar [\*](https://vuejs.org/v2/guide/components.html#Component-Naming-Conventions)  
* nameオプションを設定すればテンプレートに定義中のコンポーネント自身を書くことができる [\*](https://vuejs.org/v2/guide/components.html#Recursive-Components)  
* HTMLを埋め込むだけならv-onceを使う [\*](https://vuejs.org/v2/guide/components.html#Cheap-Static-Components-with-v-once)  
* コンポーネントのテンプレートは1つのroot要素を持つ必要がある  
* dataはネストすることができる  
v-model="form.foo"
* propsの型がBooleanの場合、要素にプロパティ名があるだけでtrueになる  
* this.$options.propsDataでコンポーネントの生成時にpropsに設定されているデータを取得することができる。  

```
data() {
    return {
        form: {
            foo: 1,
            bar: 2
        }
    }
}
```
<br>

```
<div id="app">
    <p v-bind:title="foo" v-on:click="alert">
      {%raw%}{{ message | plus_a }}{%endraw%}
    </p>
    <input type="text" v-model="message">
    <p v-if="bar">true</p>
    <number v-for="n in numbers" v-bind:number="n"></number>
    <div v-html="raw"></div>
    <div v-bind:id="id">{%raw%}{{ foo_plus_1 }}{%endraw%}</div>
    <button v-bind:disabled="disabled">Button</button>
    <p>{{total_units}}</p>
</div>
```

```
Vue.component('number', {
  props: ['number'],
  template: '<p class="number">{{number}}</p>'
});

let data = {
    // v-bind:class='forCSS'とする
    forCSS: {
        foo: true,
        bar: false
    },
    message: 'Hello World!',
    foo: 1234,
    total: 0,
    total_units: '',
    unit: 'times',
    bar: true,
    numbers: [1, 2, 3],
    raw: '<b>RAW HTML</b>',
    id: 'foo',
    disabled: true,
    one: 1,
    two: 2,
    // life cycle event
    created: function() {},
    mounted: function() {}
};

let vm = new Vue({
    // Vueインスタンスが紐づくHTML要素
    el: '#app',
    // HTMLにバインディングするデータ
    data: data,
    // filterの設定
    filters: {
        plus_a: function(value) {
            return value + 'a';
        }
    },
    // テンプレートで{%raw%}{{}}{%endraw%}内に配置する
    // vm.foo_plus_1で結果を取得することができる
    computed: {
        foo_plus_1: function() {
            return this.foo + 1;
        },
        one_two: {
            get: function() {
                return `${this.one}_${this.two}`;
            },
            set: function(v) {
                [this.one, this.two] = v.split('_');
            }
        }
    },
    // 指定したdataのキーが変更されたとき実行する　　　
    watch: {
        total: function() {
            this.total_units = this.total + this.units;
        }
    },
    // テンプレートで使用する関数
    methods: {
        alert: function() {alert(vm.foo == data.foo);},
        once: function() {alert('once');} 
    }
});

// data.fooの更新
vm.foo = 5678;


console.log(vm.foo == data.foo);
// Vueインスタンスの属性には$をつけてアクセスする
console.log(vm.$data.foo == data.foo);
```

<hr>
[Vuexメモ](/2017/01/14/vuex.html)  
[VueRouterメモ](/2017/01/15/vue-router.html)  

