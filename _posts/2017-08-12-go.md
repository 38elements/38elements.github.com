---
layout: posts
title: Goメモ
---

## reflect

* [StructField.PkgPath](https://golang.org/pkg/reflect/#StructField), [Method.PkgPath](https://golang.org/pkg/reflect/#Method)が`""`の場合は`public`である

* ポインタとその値は別のものとして扱われる。ポインタから値に紐づいたメソッドを得ることはできない。  
その逆もできない。

* Set系の操作をする際は[ValueOf()](https://golang.org/pkg/reflect/#ValueOf)にポインタを渡しているか確認する

## Channel

channelがcloseされたらとまる

```Go
for v := ch {
  ...
}
```

```Go
v, isClose = ch
```

## Library

* [sync.Once](https://golang.org/pkg/sync/#Once)は一度だけ実行するときに使用する

* [sync.Cond.Wait](https://golang.org/pkg/sync/#Cond.Wait)はL.Unlock()してL.Lock()する

## Syntax

* ...Tはslice

* v...はsliceを要素に分解する

* [init()](https://golang.org/doc/effective_go.html#init)はimportされたときに実行される

### switch

```Go
    switch t {
    case Foo:
        return ...
    default:
        return ...
    }
    
    switch v {
    case v < 1:
        return ...
    default:
        return ...
    }
```

## fmt

* printのフォーマット [\*](https://golang.org/pkg/fmt/#hdr-Printing)

* func Fprint(w io.Writer, a ...interface{}) (n int, err error) [\*](https://golang.org/pkg/fmt/#Fprint)

* func Scan(a ...interface{}) (n int, err error) [\*](https://golang.org/pkg/fmt/#Scan)  
 standard input精査する

* func Sprintf(format string, a ...interface{}) string [\*](https://golang.org/pkg/fmt/#Sprintf)

* func Sscan(str string, a ...interface{}) (n int, err error) [\*](https://golang.org/pkg/fmt/#Sscan)  
指定した文字列を精査する

## Interfaces

* [sort.Interface](https://golang.org/pkg/sort/#Interface)

* [io.Writer](https://golang.org/pkg/io/#Writer)

## Cast

```Go
type FooFunc func(int, int)


func (f FooFunc) ServeHTTP(w, req int) {
    f(w, req)
}

func Foo(w, req int) {
    fmt.Fprintln(w, req)
}

handler := FooFunc(Foo)
```
