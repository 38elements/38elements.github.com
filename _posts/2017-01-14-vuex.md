---
layout: posts
title: Vuexメモ 
---
[Docuemnt](https://vuex.vuejs.org/en/)  
[Github](https://github.com/vuejs/vuex)  

#### Usage

* ルートコンポーネントに`store`オプションを設定する  
子コンポーネントで`this.$store`を利用することができるようになる  
子コンポーネントには自動で設定される  

```
import Vue from 'vue';
import Vuex from 'vuex';

Vue.use(Vuex);
let store = new Vuex.Store({});
let app = new Vue({
  store,
}).$mount('#app');
```

#### Vuex.Store [\*](https://vuex.vuejs.org/en/api.html)

* Storeはアプリケーションで1つ  

* storeに新しい属性を付与する時はリアクティブ性を持たせるためにVue.set()もしくは新しい値をセットする  

* store.stateにデータを保存する  

* mapStateはthis.$storeを省略することができる  

* computedの中で`...mapState`する  

* store.gettersはstateに関連するデータを取得する関数を登録する [\*](https://vuex.vuejs.org/en/getters.html)  

* mapGettersはcomputedにstore.gettersのキーをマッピングする際に利用する  

* stateは[mutations](https://vuex.vuejs.org/en/mutations.html)にあるメソッドを通じて変更する
this.$store.commit(mutationsのキー, 値)  

* [mutations](https://vuex.vuejs.org/en/mutations.html)ないでは同期処理を行う   

* [actions](https://vuex.vuejs.org/en/actions.html)は[mutations](https://vuex.vuejs.org/en/mutations.html)のコミットを行う  
this.$store.commit(mutationsのキー, 値)  
非同期的な処理を実行してもよい  
actionsの実行はstore.dispatch(アクション名, param)  
コンポーネント内ではthis.$store.dispatch(アクション名, param)   
actions内部はPromiseで囲む  
例外はcatch()で取得  

* [modules](https://vuex.vuejs.org/en/modules.html)はstoreの設定を分割して定義することができる  
states以外はデフォルトではglobalにおかれる  
states以外もnamespaceをおきたい場合はnamespaced: true  
名前空間を使用した場合以下のような形式にする  
this.$store.getters['foo/bar']  
this.$store.getters['モジュール名/キー名']  
this.$store.dispatch('モジュール名/キー名', false);  
store.registerModule()とstore.unregisterModule()で動的にモジュールを登録することができる。  
モジュールではstateはローカルステートとルートステートに分かれる  

<hr>
[Vue.jsメモ](/2016/12/20/vuejs.html)  
[VueRouterメモ](/2017/01/15/vue-router.html)  
[cheatsheet](https://vuejs-tips.github.io/vuex-cheatsheet/)  
